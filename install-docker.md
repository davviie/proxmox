```bash
bash -c "$(curl -fsSL https://raw.githubusercontent.com/community-scripts/ProxmoxVE/main/vm/docker-vm.sh)"
```

# run the script below like this:

```bash
nano setup-network.sh
# Paste the script, save, and close (Ctrl+O, Enter, Ctrl+X).

chmod +x setup-network.sh # Make it executable

sudo ./setup-network.sh # Run with root privileges

#!/bin/bash

# --- Configuration ---
IFACE="ens18"
IPADDR="192.168.1.100"
NETMASK="255.255.255.0"
GATEWAY="192.168.1.1"
DNS1="192.168.1.1"
DNS2="1.1.1.1"
DNS3="8.8.8.8"

# --- Backup and configure /etc/network/interfaces ---
echo "[+] Backing up existing interfaces file..."
cp /etc/network/interfaces /etc/network/interfaces.bak

echo "[+] Writing static network config for $IFACE..."
cat <<EOF > /etc/network/interfaces
# This file was generated by persist-network.sh
auto lo
iface lo inet loopback

auto $IFACE
iface $IFACE inet static
    address $IPADDR
    netmask $NETMASK
    gateway $GATEWAY
    dns-nameservers $DNS1 $DNS2 $DNS3
EOF

# --- Apply the network settings ---
echo "[+] Restarting networking service..."
if systemctl restart networking 2>/dev/null; then
    echo "[+] Networking restarted with systemctl."
elif service networking restart 2>/dev/null; then
    echo "[+] Networking restarted with service."
else
    echo "[!] Warning: Unable to restart networking service automatically."
fi

# --- Configure DNS ---
echo "[+] Setting DNS servers in /etc/resolv.conf..."
cat <<EOF > /etc/resolv.conf
nameserver $DNS1
nameserver $DNS2
nameserver $DNS3
EOF

# --- Connectivity check ---
echo "[+] Checking internet connectivity..."
if ping -c 2 1.1.1.1 >/dev/null 2>&1; then
    echo "[✔] Internet is reachable (ping to 1.1.1.1 succeeded)"
else
    echo "[✘] No internet access. Please verify physical connection or gateway settings."
fi
